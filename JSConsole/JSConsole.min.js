if("undefined"===typeof jQuery)throw Error("JSConsole requires jQuery");(function(b,u,k){var m="#2f0b24",n="white",p="green",q="red",r="orange",s="blue";u.JSConsole=function(e){function a(a){var d;document.createRange?(d=document.createRange(),d.selectNodeContents(a),d.collapse(!1),a=u.getSelection(),a.removeAllRanges(),a.addRange(d)):document.selection&&(d=document.body.createTextRange(),d.moveToElementText(a),d.collapse(!1),d.select())}if(!(this instanceof JSConsole))return new JSConsole(e);var f=b("#"+e).addClass("jsconsole");f.attr("tabindex",0);var v={},l=[],c=0,g=null,y=this,t="JSConsole:~";f.on({keydown:function(h){switch(h.which){case 9:h.preventDefault();break;case 13:h.preventDefault();z();w();break;case 38:h.preventDefault();0===c&&null===g&&(g=b(this).text());c+=1;if(c>l.length){c=l.length;break}if(0===c&&null!=g){b(this).text(g);a(this);break}b(this).text(l[c-1]);a(this);break;case 40:h.preventDefault();0===c&&null===g&&(g=b(this).text());c-=1;if(0>c){c=0;break}if(0===c&&null!=g){b(this).text(g);a(this);break}b(this).text(l[c-1]);a(this)}}},".jsconsole_input.jsconsole_active .jsconsole_line");f.click(function(a){b(a.target).is(".jsconsole .jsconsole_line")||f.children(".jsconsole_input.jsconsole_active").children(".jsconsole_line").focus()}).on("contextmenu",function(a){return!1}).keypress(function(){f.children(".jsconsole_input.jsconsole_active").children(".jsconsole_line").focus()});var w=function(){f.children(".jsconsole_input.jsconsole_active").removeClass("jsconsole_active").children(".jsconsole_line").removeAttr("contenteditable");var a=b("<span class='jsconsole_directory'>"+t+"$</span>"),d=b("<div class='jsconsole_line' contenteditable></div>"),a=b("<div class='jsconsole_input jsconsole_active'></div>").append(a).append(d);f.append(a);d.focus()},z=function(){var a=f.children(".jsconsole_input.jsconsole_active").children(".jsconsole_line").text();c=0;g=null;l.unshift(a);a=a.split(";");b.each(a,function(){var a=this.split(" ",1),h="";0<this.indexOf(" ")&&(h=this.substring(this.indexOf(" ")).trim());a=v[a];"function"===typeof a&&a.call(y,h)})};this.addCommand=function(a,b){"string"==typeof a&&"function"==typeof b&&(v[a]=b)};this.addOutput=function(a){var d=b("<div class='jsconsole_output'></div>"),c=b("<div class='jsconsole_line'></div>");c.text(a);d.append(c);f.append(d)};this.addError=function(a){var d=b("<div class='jsconsole_error'></div>"),c=b("<div class='jsconsole_line'></div>");c.text(a);d.append(c);f.append(d)};this.addWarning=function(a){var c=b("<div class='jsconsole_warning'></div>"),e=b("<div class='jsconsole_line'></div>");e.text(a);c.append(e);f.append(c)};this.backgroundColor=function(a){if(a===k)return m;m=a;return this};this.inputColor=function(a){if(a===k)return n;n=a;return this};this.outputColor=function(a){if(a===k)return p;p=a;return this};this.errorColor=function(a){if(a===k)return q;q=a;return this};this.warningColor=function(a){if(a===k)return r;r=a;return this};this.dirColor=function(a){if(a===k)return s;s=a;return this};this.applyColorChanges=function(){x();return this};this.executeCommands=function(){b.each(arguments,function(){var a=b(".jsconsole_input.jsconsole_active .jsconsole_line");a.text(this);a.trigger({type:"keydown",which:13})})};this.directory=function(a){if(a===k)return t;t=a;return this};w();this.addCommand("clear",function(){f.children().remove()})};var x=function(){b("#jsconsoleStyleID").remove();var e=b("<style id='jsconsoleStyleID'></style>");(function(){var a;a=".jsconsole_input{"+("color:"+n+";");a+="outline:none;display:block;";a+="}";e.append(a)})();(function(){var a;a=".jsconsole_input.jsconsole_active{display:inline;}";e.append(a)})();(function(){var a;a=".jsconsole{"+("background-color:"+m+";");a+="height:100%;width:100%;";a+="overflow:auto;";a+="display:block;";a+="cursor:text;";a+="}";e.append(a)})();(function(){var a;a=".jsconsole_directory{"+("color:"+s+";");a+="padding-right:8px;display:inline;";a+="}";e.append(a)})();(function(){var a;a=".jsconsole_line{display:inline;border:none;";a+="outline:0;";a+="word-wrap:break-word;";a+="white-space:pre-wrap;";a+="}";e.append(a)})();(function(){var a;a=".jsconsole_output, .jsconsole_error, .jsconsole_warning{display:block;"+("color:"+p+";");a+="border:none;";a+="outline:0;";a+="word-wrap:break-word;";a+="white-space:pre-wrap;";a+="}";e.append(a)})();(function(){var a;a=".jsconsole_error{"+("color:"+q+";");e.append(a+"}")})();(function(){var a;a=".jsconsole_warning{"+("color:"+r+";");e.append(a+"}")})();b("head").append(e)};x()})(jQuery,window);